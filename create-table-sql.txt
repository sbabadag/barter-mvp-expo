-- SQL to create user_push_tokens table
-- Copy and paste this into Supabase SQL Editor:
-- https://guvdkdyrmmoyadmapokx.supabase.co/project/guvdkdyrmmoyadmapokx/editor

CREATE TABLE user_push_tokens (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID NOT NULL,
  token TEXT NOT NULL,
  platform TEXT NOT NULL,
  device_name TEXT,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, token)
);

ALTER TABLE user_push_tokens ENABLE ROW LEVEL SECURITY;

CREATE POLICY "public_access" ON user_push_tokens FOR ALL USING (true);